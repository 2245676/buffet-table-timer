# 自助餐桌台计时系统 TODO

## 数据库设计
- [x] 设计桌台配置表（tables）
- [x] 设计用餐记录表（dining_sessions）
- [x] 创建数据库schema并推送

## 后端API开发
- [x] 实现桌台管理API（增删改查）
- [x] 实现开始用餐API
- [x] 实现延时操作API（+5分钟、+10分钟）
- [x] 实现结束用餐API
- [x] 实现获取所有桌台状态API
- [x] 实现排队预测API
- [x] 实现全局定时器检查逻辑
- [x] 实现超时通知功能

## 前端界面开发
- [x] 设计优雅完美的视觉风格（配色、字体、布局）
- [x] 实现桌台管理界面
- [x] 实现桌台状态卡片组件
- [x] 实现开始用餐功能
- [x] 实现实时倒计时显示
- [x] 实现延时按钮功能
- [x] 实现结束用餐功能
- [x] 实现排队预测界面
- [x] 实现超时提醒（声音+弹窗）
- [x] 实现状态颜色区分（空闲/用餐中/即将超时/已超时/缓冲期/停用）

## 实时监控系统
- [x] 实现前端每分钟轮询机制
- [x] 实现剩余时间计算逻辑
- [x] 实现状态自动更新（即将超时≤15分钟、已超时）
- [x] 实现超时重复提醒（每3分钟）

## 部署和适配
- [x] 创建Windows一键启动脚本（.bat）
- [x] 创建Linux一键启动脚本（.sh）
- [x] 优化移动端响应式设计
- [x] 优化触摸操作体验

## 测试和优化
- [x] 编写后端单元测试
- [x] 测试所有功能流程
- [x] 测试移动端兼容性
- [x] 性能优化和bug修复

## 管理后台功能
- [x] 创建管理后台页面路由
- [x] 实现桌台列表展示（管理视图）
- [x] 创建添加桌台表单和对话框
- [x] 创建编辑桌台表单和对话框
- [x] 实现删除桌台确认对话框
- [x] 添加权限控制（仅管理员可访问）
- [x] 优化表单验证和错误提示
- [x] 测试所有管理功能

## UI美化和布局优化
- [x] 重新设计主页为两栅布局（左侧排队预测、右侧桌台网格）
- [x] 美化排队预测卡片样式和动画
- [x] 优化桌台卡片的视觉效果
- [x] 添加排队预测的实时更新动画
- [x] 改进响应式设计以適配各种屏幕

## 桌台卡片优化
- [x] 改为横向长方形布局
- [x] 调整信息排列（开始时间、预计结束时间同一排）
- [x] 添加缓冲期结束按钮
- [x] 解决按钮超出框架问题
- [x] 去掉最多X人和标准X分钟的显示
- [x] 优化按钮组排列

## 卡片和排队预测优化
- [x] 调整桌台卡片宽高自适应
- [x] 实现桌台卡片上下对齐
- [x] 重新设计排队预测面板布局
- [x] 把可用时间预测挪到右侧重点显示
- [x] 优化排队预测的视觉层级

## 邮件通知和UI调整
- [x] 在管理后台添加邮件通知开关
- [x] 实现邮件通知功能的开启/关闭
- [x] 在红色横幅中间显示当前时间（大字）
- [x] 调整桌号位置到方块顶部
- [x] 增加桌台方块高度


## 预约管理系统 - MVP阶段

### 数据库设计
- [x] 设计预约表（reservations）
- [x] 设计操作日志表（operation_logs）
- [x] 设计容量配置表（capacity_config）
- [x] 设计黑名单表（blacklist）
- [x] 创建数据库schema并推送

### 后端API开发
- [x] 实现预约CRUD操作
- [x] 实现日期范围查询
- [x] 实现搜索功能（姓名/电话）
- [x] 实现容量检查逻辑
- [x] 实现操作日志记录
- [x] 实现预约与桌台关联API
- [x] 实现统计数据API

### 前端 - 今日预约页面
- [x] 创建预约管理主页面
- [x] 实现今日预约表格展示
- [x] 实现搜索功能
- [x] 实现新增预约对话框
- [x] 实现编辑预约对话框
- [x] 实现状态更新功能
- [x] 实现右侧实时统计面板
- [x] 实现容量超出警告

### 前端 - 日历视图
- [ ] 创建日历视图页面
- [ ] 实现月/周/日切换
- [ ] 实现日期点击进入预约列表
- [ ] 实现预约数量标记

### 前端 - 预约管理列表
- [ ] 创建预约管理列表页面
- [ ] 实现日期范围筛选
- [ ] 实现状态筛选
- [ ] 实现人数筛选
- [ ] 实现来源筛选
- [ ] 实现导出功能
- [ ] 实现打印功能

### 前端 - 预约与桌台联动
- [ ] 在预约详情添加分配桌台按钮
- [ ] 实现预约分配至桌台
- [ ] 在桌台卡片显示预约信息
- [ ] 实现预约取消时释放桌台
- [ ] 实现多预约同桌显示

### 前端 - 页面切换
- [ ] 在主页面添加预约/桌台切换按钮
- [ ] 实现路由导航
- [ ] 保持用户操作状态

### 权限与安全
- [ ] 实现角色权限检查
- [ ] 实现编辑冲突提示
- [ ] 实现操作日志查看

### 测试
- [ ] 编写预约API单元测试
- [ ] 编写前端功能测试
- [ ] 测试多人协作场景
- [ ] 测试预约与桌台联动
